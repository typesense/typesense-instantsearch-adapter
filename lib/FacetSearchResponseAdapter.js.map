{"version":3,"file":"FacetSearchResponseAdapter.js","names":["_interopRequireDefault","require","Object","defineProperty","exports","value","FacetSearchResponseAdapter","_classCallCheck2","_createClass2","_utils","typesenseResponse","instantsearchRequest","key","_adaptFacetHits","typesenseFacetCounts","_this","adaptedResult","facet","find","field_name","params","facetName","counts","map","facetCount","highlighted","_adaptHighlightTag","highlightPreTag","highlightPostTag","count","adapt","facetHits","facet_counts","exhaustiveFacetsCount","processingTimeMS","search_time_ms","assign","prototype","utils"],"sources":["../src/FacetSearchResponseAdapter.js"],"sourcesContent":["\"use strict\";\n\nimport { utils } from \"./support/utils\";\n\nexport class FacetSearchResponseAdapter {\n  constructor(typesenseResponse, instantsearchRequest) {\n    this.typesenseResponse = typesenseResponse;\n    this.instantsearchRequest = instantsearchRequest;\n  }\n\n  _adaptFacetHits(typesenseFacetCounts) {\n    let adaptedResult = {};\n    const facet = typesenseFacetCounts.find((facet) => facet.field_name === this.instantsearchRequest.params.facetName);\n\n    adaptedResult = facet.counts.map((facetCount) => ({\n      value: facetCount.value,\n      highlighted: this._adaptHighlightTag(\n        facetCount.highlighted,\n        this.instantsearchRequest.params.highlightPreTag,\n        this.instantsearchRequest.params.highlightPostTag,\n      ),\n      count: facetCount.count,\n    }));\n\n    return adaptedResult;\n  }\n\n  adapt() {\n    const adaptedResult = {\n      facetHits: this._adaptFacetHits(this.typesenseResponse.facet_counts),\n      exhaustiveFacetsCount: true,\n      processingTimeMS: this.typesenseResponse.search_time_ms,\n    };\n    return adaptedResult;\n  }\n}\n\nObject.assign(FacetSearchResponseAdapter.prototype, utils);\n"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,sBAAA,GAAAC,OAAA;AAAAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,0BAAA;AAAA,IAAAC,gBAAA,GAAAP,sBAAA,CAAAC,OAAA;AAAA,IAAAO,aAAA,GAAAR,sBAAA,CAAAC,OAAA;AAEb,IAAAQ,MAAA,GAAAR,OAAA;AAAwC,IAE3BK,0BAA0B,GAAAF,OAAA,CAAAE,0BAAA;EACrC,SAAAA,2BAAYI,iBAAiB,EAAEC,oBAAoB,EAAE;IAAA,IAAAJ,gBAAA,mBAAAD,0BAAA;IACnD,IAAI,CAACI,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAACC,oBAAoB,GAAGA,oBAAoB;EAClD;EAAC,WAAAH,aAAA,aAAAF,0BAAA;IAAAM,GAAA;IAAAP,KAAA,EAED,SAAAQ,gBAAgBC,oBAAoB,EAAE;MAAA,IAAAC,KAAA;MACpC,IAAIC,aAAa,GAAG,CAAC,CAAC;MACtB,IAAMC,KAAK,GAAGH,oBAAoB,CAACI,IAAI,CAAC,UAACD,KAAK;QAAA,OAAKA,KAAK,CAACE,UAAU,KAAKJ,KAAI,CAACJ,oBAAoB,CAACS,MAAM,CAACC,SAAS;MAAA,EAAC;MAEnHL,aAAa,GAAGC,KAAK,CAACK,MAAM,CAACC,GAAG,CAAC,UAACC,UAAU;QAAA,OAAM;UAChDnB,KAAK,EAAEmB,UAAU,CAACnB,KAAK;UACvBoB,WAAW,EAAEV,KAAI,CAACW,kBAAkB,CAClCF,UAAU,CAACC,WAAW,EACtBV,KAAI,CAACJ,oBAAoB,CAACS,MAAM,CAACO,eAAe,EAChDZ,KAAI,CAACJ,oBAAoB,CAACS,MAAM,CAACQ,gBACnC,CAAC;UACDC,KAAK,EAAEL,UAAU,CAACK;QACpB,CAAC;MAAA,CAAC,CAAC;MAEH,OAAOb,aAAa;IACtB;EAAC;IAAAJ,GAAA;IAAAP,KAAA,EAED,SAAAyB,MAAA,EAAQ;MACN,IAAMd,aAAa,GAAG;QACpBe,SAAS,EAAE,IAAI,CAAClB,eAAe,CAAC,IAAI,CAACH,iBAAiB,CAACsB,YAAY,CAAC;QACpEC,qBAAqB,EAAE,IAAI;QAC3BC,gBAAgB,EAAE,IAAI,CAACxB,iBAAiB,CAACyB;MAC3C,CAAC;MACD,OAAOnB,aAAa;IACtB;EAAC;AAAA;AAGHd,MAAM,CAACkC,MAAM,CAAC9B,0BAA0B,CAAC+B,SAAS,EAAEC,YAAK,CAAC","ignoreList":[]}